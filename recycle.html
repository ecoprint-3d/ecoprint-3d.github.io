<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–¥–∞—Ç—å –ø–ª–∞—Å—Ç–∏–∫ - –≠–∫–æ –ü—Ä–∏–Ω—Ç</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/recycle.css">
    <!-- –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã API -->
    <script src="https://api-maps.yandex.ru/2.1/?apikey=2dd86e86-d868-42d6-bfe8-58d180dd3d9e
&lang=ru_RU" type="text/javascript"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RWRQGQJFP9"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-RWRQGQJFP9');
    </script>
</head>

<body>
    <!-- –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <span class="logo-icon">‚ôªÔ∏è</span>
                <span class="logo-text">–≠–∫–æ –ü—Ä–∏–Ω—Ç</span>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                    <li><a href="tz.html">–¢–ó</a></li>
                    <li><a href="documents.html">–î–æ–∫—É–º–µ–Ω—Ç—ã</a></li>
                    <li><a href="project.html">–ü—Ä–æ–µ–∫—Ç</a></li>
                    <li><a href="profile.html">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a></li>
                </ul>
            </nav>
            <div class="auth-buttons">
                <a href="login.html" class="btn btn-login">–í–æ–π—Ç–∏</a>
                <a href="register.html" class="btn btn-register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
            </div>
        </div>
    </header>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–¥–∞—á–∏ –ø–ª–∞—Å—Ç–∏–∫–∞ -->
    <section class="recycle-page">
        <div class="recycle-container">
            <div class="recycle-header">
                <h1>–°–¥–∞—Ç—å –ø–ª–∞—Å—Ç–∏–∫</h1>
                <p>–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ —Å–¥–∞—á—É –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã—Ö –æ—Ç—Ö–æ–¥–æ–≤. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –∏ —Å–æ–æ–±—â–∏–º –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—É–Ω–∫—Ç–∞—Ö –ø—Ä–∏–µ–º–∞.</p>
            </div>

            <div class="recycle-content">
                <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏ -->
                <div class="request-form-section">
                    <h2 class="form-section-title">–§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏</h2>
                    
                    <form id="recycleRequestForm">
                        <div class="form-group">
                            <label for="userName">–í–∞—à–µ –∏–º—è *</label>
                            <input type="text" id="userName" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="userEmail">Email *</label>
                            <input type="email" id="userEmail" class="form-control" placeholder="–í–∞—à email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="userPhone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                            <input type="tel" id="userPhone" class="form-control" placeholder="+7 (999) 123-45-67">
                        </div>
                        
                        <div class="form-group">
                            <label>–¢–∏–ø –ø–ª–∞—Å—Ç–∏–∫–∞ *</label>
                            <div class="plastic-type-grid" id="plasticTypeGrid">
                                <div class="plastic-type-card" data-type="PET">
                                    <div class="plastic-icon">‚ô≥</div>
                                    <div class="plastic-name">–ü–≠–¢</div>
                                    <div class="plastic-code">PET / 1</div>
                                    <div class="plastic-price">15 –±–∞–ª–ª–æ–≤/–∫–≥</div>
                                </div>
                                <div class="plastic-type-card" data-type="HDPE">
                                    <div class="plastic-icon">‚ô¥</div>
                                    <div class="plastic-name">–ü–ù–î</div>
                                    <div class="plastic-code">HDPE / 2</div>
                                    <div class="plastic-price">12 –±–∞–ª–ª–æ–≤/–∫–≥</div>
                                </div>
                                <div class="plastic-type-card" data-type="PVC">
                                    <div class="plastic-icon">‚ôµ</div>
                                    <div class="plastic-name">–ü–í–•</div>
                                    <div class="plastic-code">PVC / 3</div>
                                    <div class="plastic-price">10 –±–∞–ª–ª–æ–≤/–∫–≥</div>
                                </div>
                                <div class="plastic-type-card" data-type="LDPE">
                                    <div class="plastic-icon">‚ô∂</div>
                                    <div class="plastic-name">–ü–í–î</div>
                                    <div class="plastic-code">LDPE / 4</div>
                                    <div class="plastic-price">8 –±–∞–ª–ª–æ–≤/–∫–≥</div>
                                </div>
                                <div class="plastic-type-card" data-type="PP">
                                    <div class="plastic-icon">‚ô∑</div>
                                    <div class="plastic-name">–ü–ü</div>
                                    <div class="plastic-code">PP / 5</div>
                                    <div class="plastic-price">14 –±–∞–ª–ª–æ–≤/–∫–≥</div>
                                </div>
                                <div class="plastic-type-card" data-type="PS">
                                    <div class="plastic-icon">‚ô∏</div>
                                    <div class="plastic-name">–ü–°</div>
                                    <div class="plastic-code">PS / 6</div>
                                    <div class="plastic-price">10 –±–∞–ª–ª–æ–≤/–∫–≥</div>
                                </div>
                            </div>
                            <input type="hidden" id="selectedPlasticType" required>
                        </div>
                        
                        <div class="form-group weight-slider">
                            <div class="slider-header">
                                <span class="slider-label">–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π –≤–µ—Å</span>
                                <span class="weight-value" id="weightValue">1 –∫–≥</span>
                            </div>
                            <input type="range" id="weightSlider" class="weight-slider-input" 
                                   min="0.1" max="10" value="1" step="0.1">
                            <div class="weight-markers">
                                <span>0.1 –∫–≥</span>
                                <span>2.5 –∫–≥</span>
                                <span>5 –∫–≥</span>
                                <span>7.5 –∫–≥</span>
                                <span>10 –∫–≥</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="additionalInfo">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</label>
                            <textarea id="additionalInfo" class="form-control" 
                                     rows="4" 
                                     placeholder="–£–∫–∞–∂–∏—Ç–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–ª–∞—Å—Ç–∏–∫–∞ (—Ü–≤–µ—Ç, –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è), –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–∏–µ–º–∞ –∏ –¥—Ä—É–≥—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é"></textarea>
                        </div>
                        
                        <!-- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±–æ–Ω—É—Å–æ–≤ -->
                        <div class="bonus-calculator" id="bonusCalculator">
                            <h4>–ü—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞—Å—á–µ—Ç –±–æ–Ω—É—Å–æ–≤</h4>
                            <div class="bonus-amount" id="calculatedBonus">75 –±–∞–ª–ª–æ–≤</div>
                            <p class="bonus-note">–¢–æ—á–Ω–∞—è —Å—É–º–º–∞ –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø—Ä–∏ –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏–∏ –Ω–∞ –ø—É–Ω–∫—Ç–µ –ø—Ä–∏–µ–º–∞</p>
                        </div>
                        
                        <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
                        <div class="message-box success" id="successMessage">
                            –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.
                        </div>
                        
                        <div class="message-box error" id="errorMessage">
                            –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è.
                        </div>
                        
                        <button type="submit" class="submit-request-btn">
                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ —Å–¥–∞—á—É
                        </button>
                    </form>
                </div>
                
                <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="info-panel-section">
                    <div class="info-card">
                        <h3><i>üìç</i> –ü—É–Ω–∫—Ç—ã –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Å—Ç–∏–∫–∞</h3>
                        <div class="map-container">
                            <div id="map"></div>
                        </div>
                        <div class="map-controls">
                            <button class="map-btn" onclick="findNearestPoint()">
                                <i>üìç</i> –ë–ª–∏–∂–∞–π—à–∏–π –∫ –≤–∞–º
                            </button>
                            <button class="map-btn secondary" onclick="showAllPoints()">
                                <i>üó∫Ô∏è</i> –í—Å–µ –ø—É–Ω–∫—Ç—ã
                            </button>
                        </div>
                    </div>
                    
                    <div class="info-card">
                        <h3><i>üìã</i> –ö–∞–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–ª–∞—Å—Ç–∏–∫</h3>
                        <ul>
                            <li>–ü—Ä–æ–º–æ–π—Ç–µ –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ –µ–º–∫–æ—Å—Ç–∏ –æ—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ</li>
                            <li>–°–Ω–∏–º–∏—Ç–µ –∫—Ä—ã—à–∫–∏ –∏ —ç—Ç–∏–∫–µ—Ç–∫–∏ (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)</li>
                            <li>–°–ø–ª—é—â–∏—Ç–µ –±—É—Ç—ã–ª–∫–∏ –∏ –±–∞–Ω–∫–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞</li>
                            <li>–†–∞–∑–¥–µ–ª–∏—Ç–µ –ø–ª–∞—Å—Ç–∏–∫ –ø–æ —Ç–∏–ø–∞–º (–µ—Å–ª–∏ —Å–¥–∞–µ—Ç–µ —Ä–∞–∑–Ω—ã–µ –≤–∏–¥—ã)</li>
                        </ul>
                    </div>
                    
                    <div class="info-card">
                        <h3><i>‚úÖ</i> –ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ–º</h3>
                        <ul>
                            <li>–ü–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ –±—É—Ç—ã–ª–∫–∏ (PET)</li>
                            <li>–£–ø–∞–∫–æ–≤–∫—É –æ—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (PP, PS)</li>
                            <li>–ö–∞–Ω–∏—Å—Ç—Ä—ã –∏ —Ñ–ª–∞–∫–æ–Ω—ã (HDPE)</li>
                            <li>–ü–ª–µ–Ω–∫—É –∏ –ø–∞–∫–µ—Ç—ã (LDPE)</li>
                            <li>–¢–µ—Ä–º–æ—É—Å–∞–¥–æ—á–Ω—É—é –ø–ª–µ–Ω–∫—É (PVC)</li>
                        </ul>
                    </div>
                    
                    <div class="info-card">
                        <h3><i>üìû</i> –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> +7 (495) 123-45-67</p>
                        <p><strong>Email:</strong> plastic@ecoprint.ru</p>
                        <p><strong>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã:</strong> –ü–Ω-–ü—Ç 10:00-18:00</p>
                        <p><strong>–ê–¥—Ä–µ—Å –≥–æ–ª–æ–≤–Ω–æ–≥–æ –æ—Ñ–∏—Å–∞:</strong> –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ú–∏–∫–ª—É—Ö–æ-–ú–∞–∫–ª–∞—è, 6</p>
                    </div>
                </div>
            </div>
            
            <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–¥–∞—á–µ -->
            <div class="instructions">
                <h2 class="form-section-title">–ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–¥–∞—á–∞ –ø–ª–∞—Å—Ç–∏–∫–∞</h2>
                <div class="instruction-steps">
                    <div class="instruction-step">
                        <div class="step-number">1</div>
                        <h4>–ó–∞—è–≤–∫–∞</h4>
                        <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏ –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ</p>
                    </div>
                    <div class="instruction-step">
                        <div class="step-number">2</div>
                        <h4>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h4>
                        <p>–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π</p>
                    </div>
                    <div class="instruction-step">
                        <div class="step-number">3</div>
                        <h4>–°–¥–∞—á–∞</h4>
                        <p>–ü—Ä–∏–≤–µ–∑–∏—Ç–µ –ø–ª–∞—Å—Ç–∏–∫ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—É–Ω–∫—Ç –ø—Ä–∏–µ–º–∞</p>
                    </div>
                    <div class="instruction-step">
                        <div class="step-number">4</div>
                        <h4>–ë–æ–Ω—É—Å—ã</h4>
                        <p>–ü–æ–ª—É—á–∏—Ç–µ –±–æ–Ω—É—Å–Ω—ã–µ –±–∞–ª–ª—ã –Ω–∞ —Å–≤–æ–π —Å—á–µ—Ç</p>
                    </div>
                </div>
            </div>
            
            <a href="index.html" class="back-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</a>
        </div>
    </section>

    <!-- –ü–æ–¥–≤–∞–ª -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>–≠–∫–æ –ü—Ä–∏–Ω—Ç</h3>
                    <p>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Å—Ç–∏–∫–∞ –∏ 3D-–ø–µ—á–∞—Ç–∏ –¥–ª—è –≤—É–∑–æ–≤ –∏ —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤.</p>
                </div>
                <div class="footer-column">
                    <h3>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h3>
                    <ul>
                        <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                        <li><a href="tz.html">–¢–ó</a></li>
                        <li><a href="documents.html">–î–æ–∫—É–º–µ–Ω—Ç—ã</a></li>
                        <li><a href="project.html">–ü—Ä–æ–µ–∫—Ç</a></li>
                        <li><a href="profile.html">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                    <ul>
                        <li>Email: info@ecoprint.ru</li>
                        <li>–¢–µ–ª–µ—Ñ–æ–Ω: +7 (495) 123-45-67</li>
                        <li>–ê–¥—Ä–µ—Å: –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ú–∏–∫–ª—É—Ö–æ-–ú–∞–∫–ª–∞—è, 6</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 –≠–∫–æ –ü—Ä–∏–Ω—Ç. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <script>
        // –¢–æ—á–∫–∏ –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Å—Ç–∏–∫–∞
        const collectionPoints = [
            {
                id: 1,
                name: "–ì–ª–∞–≤–Ω—ã–π –ø—É–Ω–∫—Ç –ø—Ä–∏–µ–º–∞",
                address: "—É–ª. –ú–∏–∫–ª—É—Ö–æ-–ú–∞–∫–ª–∞—è, 6",
                coordinates: [55.652014, 37.499372],
                type: "main",
                phone: "+7 (495) 123-45-67",
                hours: "–ü–Ω-–ü—Ç 10:00-18:00",
                bonuses: "15 –±–∞–ª–ª–æ–≤/–∫–≥"
            },
        ];

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∫–∞—Ä—Ç—ã
        let myMap = null;
        let objectManager = null;
        let userLocation = null;

        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
            initMap();
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
            const plasticCards = document.querySelectorAll('.plastic-type-card');
            const selectedPlasticType = document.getElementById('selectedPlasticType');
            const weightSlider = document.getElementById('weightSlider');
            const weightValue = document.getElementById('weightValue');
            const calculatedBonus = document.getElementById('calculatedBonus');
            const form = document.getElementById('recycleRequestForm');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // –¶–µ–Ω—ã –∑–∞ –∫–∏–ª–æ–≥—Ä–∞–º–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ø–ª–∞—Å—Ç–∏–∫–∞
            const plasticPrices = {
                'PET': 15,
                'HDPE': 12,
                'PVC': 10,
                'LDPE': 8,
                'PP': 14,
                'PS': 10
            };
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            let currentPlasticType = 'PET';
            let currentWeight = 5;
            
            // –í—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø–ª–∞—Å—Ç–∏–∫–∞
            plasticCards.forEach(card => {
                card.addEventListener('click', function() {
                    // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
                    plasticCards.forEach(c => c.classList.remove('selected'));
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É
                    this.classList.add('selected');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∏–ø
                    currentPlasticType = this.dataset.type;
                    selectedPlasticType.value = currentPlasticType;
                    
                    // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –±–æ–Ω—É—Å—ã
                    calculateBonus();
                });
            });
            
            // –í—ã–¥–µ–ª—è–µ–º –ø–µ—Ä–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            plasticCards[0].classList.add('selected');
            selectedPlasticType.value = 'PET';
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª–∞–π–¥–µ—Ä–∞ –≤–µ—Å–∞
            weightSlider.addEventListener('input', function() {
                currentWeight = parseFloat(this.value);
                weightValue.textContent = currentWeight + ' –∫–≥';
                calculateBonus();
            });
            
            // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –±–æ–Ω—É—Å–æ–≤
            function calculateBonus() {
                const pricePerKg = plasticPrices[currentPlasticType];
                const totalBonus = Math.round(pricePerKg * currentWeight);
                calculatedBonus.textContent = totalBonus + ' –±–∞–ª–ª–æ–≤';
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –±–æ–Ω—É—Å–æ–≤
            calculateBonus();
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
                successMessage.style.display = 'none';
                errorMessage.style.display = 'none';
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
                const userName = document.getElementById('userName').value;
                const userEmail = document.getElementById('userEmail').value;
                
                if (!userName || !userEmail) {
                    errorMessage.style.display = 'block';
                    return;
                }
                
                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
                const formData = {
                    name: userName,
                    email: userEmail,
                    phone: document.getElementById('userPhone').value,
                    plasticType: currentPlasticType,
                    weight: currentWeight,
                    estimatedBonus: Math.round(plasticPrices[currentPlasticType] * currentWeight),
                    additionalInfo: document.getElementById('additionalInfo').value,
                    date: new Date().toLocaleString('ru-RU')
                };
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞—è–≤–∫—É –≤ localStorage
                saveRequest(formData);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
                successMessage.style.display = 'block';
                
                // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Å–æ–æ–±—â–µ–Ω–∏—é
                successMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
                setTimeout(() => {
                    form.reset();
                    plasticCards[0].click(); // –í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—ã–π —Ç–∏–ø –ø–ª–∞—Å—Ç–∏–∫–∞
                    weightSlider.value = 5;
                    weightValue.textContent = '5 –∫–≥';
                    calculateBonus();
                    
                    // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                    if (currentUser) {
                        document.getElementById('userName').value = currentUser.name || currentUser.fullName || '';
                        document.getElementById('userEmail').value = currentUser.email || '';
                    }
                }, 3000);
            });
            
            // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞—è–≤–∫–∏
            function saveRequest(requestData) {
                // –ü–æ–ª—É—á–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞—è–≤–∫–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤
                let requests = JSON.parse(localStorage.getItem('recycleRequests')) || [];
                
                // –î–æ–±–∞–≤–ª—è–µ–º ID –∏ —Å—Ç–∞—Ç—É—Å –∫ –∑–∞—è–≤–∫–µ
                const newRequest = {
                    id: Date.now(), // –ò—Å–ø–æ–ª—å–∑—É–µ–º timestamp –∫–∞–∫ ID
                    ...requestData,
                    status: 'pending', // pending, confirmed, completed, cancelled
                    createdAt: new Date().toISOString()
                };
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞
                requests.unshift(newRequest);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ localStorage
                localStorage.setItem('recycleRequests', JSON.stringify(requests));
                
                console.log('–ó–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞:', newRequest);
            }
            
            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É
            function prefillForm() {
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                if (currentUser) {
                    document.getElementById('userName').value = currentUser.name || currentUser.fullName || '';
                    document.getElementById('userEmail').value = currentUser.email || '';
                }
            }
            
            // –í—ã–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ
            prefillForm();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–ø–∫–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            function updateHeader() {
                const authButtons = document.querySelector('.auth-buttons');
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                
                if (currentUser) {
                    authButtons.innerHTML = `
                        <div style="display: flex; align-items: center;">
                            <a href="profile.html" class="btn btn-login" style="margin-right: 10px;">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                            <a href="#" id="logoutBtn" class="btn btn-register">–í—ã–π—Ç–∏</a>
                        </div>
                    `;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤—ã—Ö–æ–¥–∞
                    document.getElementById('logoutBtn').addEventListener('click', function(e) {
                        e.preventDefault();
                        localStorage.removeItem('currentUser');
                        window.location.reload();
                    });
                }
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —à–∞–ø–∫—É
            updateHeader();
        });

        // –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Ä—Ç—ã
        function initMap() {
            ymaps.ready(function() {
                // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É —Å —Ü–µ–Ω—Ç—Ä–æ–º –≤ –ú–æ—Å–∫–≤–µ
                myMap = new ymaps.Map("map", {
                    center: [55.6512, 37.4873], // –¶–µ–Ω—Ç—Ä –ú–æ—Å–∫–≤—ã
                    zoom: 12,
                    controls: ['zoomControl', 'fullscreenControl']
                });
                
                // –°–æ–∑–¥–∞–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –º–µ—Ç–∫–∞–º–∏
                objectManager = new ymaps.ObjectManager({
                    clusterize: true,
                    gridSize: 64,
                    clusterDisableClickZoom: true
                });
                
                // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
                objectManager.objects.options.set('preset', 'islands#greenDotIcon');
                objectManager.clusters.options.set('preset', 'islands#greenClusterIcons');
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç—É
                const points = collectionPoints.map(point => ({
                    type: 'Feature',
                    id: point.id,
                    geometry: {
                        type: 'Point',
                        coordinates: point.coordinates
                    },
                    properties: {
                        balloonContentHeader: `<strong>${point.name}</strong>`,
                        balloonContentBody: `
                            <div style="padding: 5px 0;">
                                <p><strong>–ê–¥—Ä–µ—Å:</strong> ${point.address}</p>
                                <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${point.phone}</p>
                                <p><strong>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã:</strong> ${point.hours}</p>
                                <p><strong>–ë–æ–Ω—É—Å—ã:</strong> ${point.bonuses}</p>
                                <p><strong>–¢–∏–ø –ø—É–Ω–∫—Ç–∞:</strong> ${getPointTypeName(point.type)}</p>
                            </div>
                        `,
                        clusterCaption: point.name,
                        hintContent: point.name,
                        iconContent: getPointIcon(point.type)
                    }
                }));
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —Ç–æ—á–∫–∏ –≤ –º–µ–Ω–µ–¥–∂–µ—Ä –æ–±—ä–µ–∫—Ç–æ–≤
                objectManager.add(points);
                myMap.geoObjects.add(objectManager);
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –º–µ—Ç–∫–µ
                objectManager.objects.events.add('click', function(e) {
                    const objectId = e.get('objectId');
                    const point = collectionPoints.find(p => p.id === objectId);
                    
                    if (point) {
                        // –û—Ç–∫—Ä—ã–≤–∞–µ–º –±–∞–ª—É–Ω —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
                        myMap.balloon.open(point.coordinates, {
                            contentHeader: `<strong>${point.name}</strong>`,
                            contentBody: `
                                <div style="max-width: 300px;">
                                    <p><strong>–ê–¥—Ä–µ—Å:</strong> ${point.address}</p>
                                    <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${point.phone}</p>
                                    <p><strong>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã:</strong> ${point.hours}</p>
                                    <p><strong>–ë–æ–Ω—É—Å—ã:</strong> ${point.bonuses}</p>
                                    <p><strong>–¢–∏–ø –ø—É–Ω–∫—Ç–∞:</strong> ${getPointTypeName(point.type)}</p>
                                    <div style="margin-top: 10px;">
                                        <button onclick="buildRoute(${point.coordinates[0]}, ${point.coordinates[1]})" 
                                                style="background: #2e7d32; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                                            üìç –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
                                        </button>
                                    </div>
                                </div>
                            `,
                            contentFooter: '<small>–≠–∫–æ –ü—Ä–∏–Ω—Ç - –ø—É–Ω–∫—Ç –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Å—Ç–∏–∫–∞</small>'
                        });
                    }
                });
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ –¥–ª—è —Ç–∏–ø–∞ –ø—É–Ω–∫—Ç–∞
        function getPointIcon(type) {
            switch(type) {
                case 'main': return '‚ôªÔ∏è';
                case 'station': return 'üöá';
                case 'campus': return 'üéì';
                case 'mall': return 'üè¨';
                case 'park': return 'üå≥';
                default: return 'üìç';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–∏–ø–∞ –ø—É–Ω–∫—Ç–∞
        function getPointTypeName(type) {
            switch(type) {
                case 'main': return '–ì–ª–∞–≤–Ω—ã–π –ø—É–Ω–∫—Ç';
                case 'station': return '–°—Ç–∞–Ω—Ü–∏—è –º–µ—Ç—Ä–æ';
                case 'campus': return '–ö–∞–º–ø—É—Å –≤—É–∑–∞';
                case 'mall': return '–¢–æ—Ä–≥–æ–≤—ã–π —Ü–µ–Ω—Ç—Ä';
                case 'park': return '–ü–∞—Ä–∫';
                default: return '–ü—É–Ω–∫—Ç –ø—Ä–∏–µ–º–∞';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–µ–≥–æ –ø—É–Ω–∫—Ç–∞
        function findNearestPoint() {
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const userCoords = [position.coords.latitude, position.coords.longitude];
                        userLocation = userCoords;
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                        const userPlacemark = new ymaps.Placemark(
                            userCoords,
                            {
                                balloonContent: '<strong>–í–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</strong>',
                                iconCaption: '–í—ã –∑–¥–µ—Å—å'
                            },
                            {
                                preset: 'islands#blueCircleDotIcon'
                            }
                        );
                        
                        myMap.geoObjects.add(userPlacemark);
                        
                        // –ù–∞—Ö–æ–¥–∏–º –±–ª–∏–∂–∞–π—à–∏–π –ø—É–Ω–∫—Ç
                        let nearestPoint = null;
                        let minDistance = Infinity;
                        
                        collectionPoints.forEach(point => {
                            const distance = getDistance(userCoords[0], userCoords[1], 
                                                        point.coordinates[0], point.coordinates[1]);
                            if (distance < minDistance) {
                                minDistance = distance;
                                nearestPoint = point;
                            }
                        });
                        
                        if (nearestPoint) {
                            // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫–∞—Ä—Ç—É –∫ –±–ª–∏–∂–∞–π—à–µ–º—É –ø—É–Ω–∫—Ç—É
                            myMap.setCenter(nearestPoint.coordinates, 14);
                            
                            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –±–∞–ª—É–Ω —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
                            myMap.balloon.open(nearestPoint.coordinates, {
                                contentHeader: `<strong>${nearestPoint.name}</strong>`,
                                contentBody: `
                                    <div style="max-width: 300px;">
                                        <p><strong>–ë–ª–∏–∂–∞–π—à–∏–π –∫ –≤–∞–º –ø—É–Ω–∫—Ç</strong></p>
                                        <p><strong>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ:</strong> ${Math.round(minDistance * 1000)} –º</p>
                                        <p><strong>–ê–¥—Ä–µ—Å:</strong> ${nearestPoint.address}</p>
                                        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${nearestPoint.phone}</p>
                                        <p><strong>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã:</strong> ${nearestPoint.hours}</p>
                                        <div style="margin-top: 10px;">
                                            <button onclick="buildRoute(${nearestPoint.coordinates[0]}, ${nearestPoint.coordinates[1]})" 
                                                    style="background: #2e7d32; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                                                üìç –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
                                            </button>
                                        </div>
                                    </div>
                                `,
                                contentFooter: '<small>–≠–∫–æ –ü—Ä–∏–Ω—Ç - –±–ª–∏–∂–∞–π—à–∏–π –ø—É–Ω–∫—Ç –ø—Ä–∏–µ–º–∞</small>'
                            });
                        }
                    },
                    function(error) {
                        alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏.");
                        console.error("Geolocation error:", error);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 5000,
                        maximumAge: 0
                    }
                );
            } else {
                alert("–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é");
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤
        function showAllPoints() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—ã, —á—Ç–æ–±—ã –≤–º–µ—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–æ—á–∫–∏
            const bounds = ymaps.util.bounds.fromPoints(
                collectionPoints.map(point => point.coordinates)
            );
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø
            bounds[0][0] -= 0.01;
            bounds[0][1] -= 0.01;
            bounds[1][0] += 0.01;
            bounds[1][1] += 0.01;
            
            myMap.setBounds(bounds, {
                checkZoomRange: true,
                zoomMargin: 50
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞
        function buildRoute(lat, lon) {
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –Ø–Ω–¥–µ–∫—Å.–ù–∞–≤–∏–≥–∞—Ç–æ—Ä —Å –º–∞—Ä—à—Ä—É—Ç–æ–º
            const yandexNavUrl = `https://yandex.ru/maps/?rtext=~${lat},${lon}&rtt=auto`;
            window.open(yandexNavUrl, '_blank');
            
            // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –æ—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã —Å –º–∞—Ä—à—Ä—É—Ç–æ–º
            // const yandexMapsUrl = `https://yandex.ru/maps/?pt=${lon},${lat}&z=15&l=map`;
            // window.open(yandexMapsUrl, '_blank');
        }

        // –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏ (–≤ –∫–º)
        function getDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // –†–∞–¥–∏—É—Å –ó–µ–º–ª–∏ –≤ –∫–º
            const dLat = toRad(lat2 - lat1);
            const dLon = toRad(lon2 - lon1);
            const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * 
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        function toRad(degrees) {
            return degrees * Math.PI / 180;
        }
    </script>

</body>
</html>